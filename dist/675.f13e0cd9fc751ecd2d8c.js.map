{"version":3,"file":"675.f13e0cd9fc751ecd2d8c.js","mappings":"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","sources":["./src/app/pages/company/pages/new-product/new-product-routing.module.ts","./src/app/pages/company/pages/new-product/new-product.component.ts","./src/app/pages/company/pages/new-product/new-product.component.html","./src/app/pages/company/pages/new-product/new-product.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { NewProductComponent } from './new-product.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewProductComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class NewProductRoutingModule { }\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport * as fromDictionaries from '@app/store/dictionaries';\nimport * as fromRoot from '@app/store';\nimport * as fromList from '../../store/save';\nimport { ControlItem } from '@app/models/frontend';\nimport { ControlEntities } from '@app/shared/utils/form';\nimport { select, Store } from '@ngrx/store';\nimport { regex, regexErrors, markFormGroupTouched } from '@app/shared/utils';\n\n@Component({\n  selector: 'app-new-product',\n  templateUrl: './new-product.component.html',\n  styleUrls: ['./new-product.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class NewProductComponent implements OnInit {\n  loading$ !: Observable<boolean | null>;\n  form !: FormGroup;\n  dictionaries$ !: Observable<fromDictionaries.Dictionaries>;\n  categories !: ControlItem[];\n  marca !: ControlItem[];\n  controls !: ControlEntities;\n  regexErrors = regexErrors;\n\n  constructor(\n    private store: Store<fromRoot.State>,\n    private fb: FormBuilder\n  ) { }\n\n  ngOnInit(): void {\n\n    this.store.pipe(select(fromDictionaries.getDictionaries))\n      .subscribe((data: any) => {\n        if (data) {\n          this.categories = data.categories.controlItems as ControlItem[];\n          this.marca = data.marca.controlItems as ControlItem[];\n\n          this.controls = {\n            categoria: {\n              items: this.categories,\n              changed: () => { }\n            },\n            marca: {\n              items: this.marca,\n              changed: () => { }\n            },\n          }\n        }\n      });\n\n\n\n    this.form = this.fb.group({\n      nombre: [null, {\n        updateOn: 'blur', validators: [\n          Validators.required\n        ]\n      }],\n\n      descripcion: [null, {\n        updateOn: 'blur', validators: [\n          Validators.required\n        ]\n      }],\n\n\n      stock: [null, {\n        updateOn: 'blur', validators: [\n          Validators.required,\n          Validators.pattern(regex.number)\n        ]\n      }],\n\n\n      precio: [null, {\n        updateOn: 'blur', validators: [\n          Validators.required,\n          Validators.pattern(regex.number)\n        ]\n      }],\n\n      photoURL: [null],\n      categoria: null,\n      marca: null\n    })\n\n\n    this.controls = {\n      categoria: {\n        items: this.categories,\n        changed: () => { }\n      },\n      marca: {\n        items: this.marca,\n        changed: () => { }\n      },\n    }\n\n\n  }\n\n  onSubmit() : void {\n\n    if(this.form.valid){\n      this.loading$ = this.store.pipe(select(fromList.getLoading));\n      const value = this.form.value;\n\n      const product : fromList.ProductCreateRequest = {\n        nombre : value.nombre,\n        descripcion: value.descripcion,\n        categoriaId : value.categoria,\n        marcaId: value.marca,\n        precio: value.precio,\n        stock: value.stock,\n        imagen: value.photoURL\n      }\n\n      this.store.dispatch(new fromList.Create(product));\n    }else{\n      markFormGroupTouched(this.form);\n    }\n\n\n  }\n\n\n  onFilesChanged(url: any) : void {\n    if(url){\n      this.form.controls.photoURL.setValue(url);\n    }\n  }\n\n\n\n\n}\n","<div class=\"app-page\">\n\n  <div class=\"app-page__header\">\n    <h1>Nuevo Producto</h1>\n  </div>\n\n  <form [formGroup]=\"form\" autocomplete=\"off\" (submit)=\"onSubmit()\">\n\n\n    <div class=\"app-page__content\">\n\n        <div class=\"personal__photo\">\n          <div class=\"photo\">\n            <app-user-photo class=\"photo__img\" [photoURL]=\"form.controls.photoURL.value\" ></app-user-photo>\n             <div class=\"app-a\" appFilesUpload (changed)=\"onFilesChanged($event)\">\n                Subir Imagen\n             </div>\n          </div>\n        </div>\n\n        <app-form-field label=\"Nombre\" [required]=\"true\" [control]=\"form.controls.nombre\" [isInline]=\"false\">\n            <app-input formControlName=\"nombre\"></app-input>\n        </app-form-field>\n\n        <app-form-field label=\"Descripcion\" [required]=\"true\" [control]=\"form.controls.descripcion\" [isInline]=\"false\">\n          <app-input formControlName=\"descripcion\"></app-input>\n        </app-form-field>\n\n\n        <app-form-field label=\"Stock\" [required]=\"true\" [control]=\"form.controls.stock\" [isInline]=\"false\"\n          [patternError]=\"regexErrors.number\"\n        >\n          <app-input formControlName=\"stock\"></app-input>\n        </app-form-field>\n\n\n        <app-form-field label=\"Precio\" [required]=\"true\" [control]=\"form.controls.precio\" [isInline]=\"false\"\n          [patternError]=\"regexErrors.number\"\n        >\n          <app-input formControlName=\"precio\"></app-input>\n        </app-form-field>\n\n\n        <app-form-field label=\"Categoria\" [required]=\"true\" [control]=\"form.controls.categoria\" [isInline]=\"false\">\n\n          <app-select formControlName=\"categoria\" [items]=\"controls.categoria.items ? controls.categoria.items : []\" ></app-select>\n\n        </app-form-field>\n\n        <app-form-field label=\"Marca\" [required]=\"true\" [control]=\"form.controls.marca\" [isInline]=\"false\">\n\n          <app-select formControlName=\"marca\" [items]=\"controls.marca.items ? controls.marca.items : []\" ></app-select>\n\n        </app-form-field>\n\n    </div>\n\n\n    <div class=\"app-page__footer\">\n      <app-button type=\"submit\" >Guardar</app-button>\n    </div>\n\n\n  </form>\n\n  <app-spinner *ngIf=\"loading$ | async\"></app-spinner>\n\n\n\n</div>\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NewProductRoutingModule } from './new-product-routing.module';\nimport { NewProductComponent } from './new-product.component';\nimport { RouterModule } from '@angular/router';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { FormFieldModule, InputModule,SelectModule } from '@app/shared/controls';\nimport { ButtonModule } from '@app/shared/buttons';\nimport { SpinnerModule } from '@app/shared/indicators';\nimport { PopupsModule, UserPhotoModule } from '@app/shared';\n\n\n@NgModule({\n  declarations: [\n    NewProductComponent\n  ],\n  imports: [\n    CommonModule,\n    NewProductRoutingModule,\n    RouterModule,\n    ReactiveFormsModule,\n    FormFieldModule,\n    InputModule,\n    ButtonModule,\n    SpinnerModule,\n    PopupsModule,\n    UserPhotoModule,\n    SelectModule\n  ]\n})\nexport class NewProductModule { }\n"],"names":[],"sourceRoot":"webpack:///"}